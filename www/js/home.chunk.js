(self.webpackChunkwallpaper=self.webpackChunkwallpaper||[]).push([[177],{5625:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,{Z:function(){return r}})},4646:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(5625),a=n(5383),i=n.n(a),o=n(4890),c=n(419),s=n(1111);function l(e,t){var n,a=c.Z.uuid(),l=!1;"boolean"==typeof t?l=t:"object"===(0,r.Z)(t)?(a=t.id,l=t.secondary):t={};var u=o.Z.render('<div id="{{id}}" class="page {{#secondary}}secondary{{/secondary}}">\n  <header>{{#secondary}}\n    <span class="icon-arrow_back" action="back"></span>\n    <span class="title">{{{title}}}</span>\n  {{/secondary}}</header>\n  <div class="page-body"></div>\n</div>',{id:a,title:e,secondary:l}),d=i().parse(u);return"function"==typeof t.onhide&&(d.onhide=t.onhide),Object.defineProperties(d,{onhide:{set:function(e){n=e},get:function(){return n}},id:{value:a},render:{value:function(){var e=this;l&&actionStack.push({id:a,type:"page",action:this.hide}),d.addEventListener("click",(function(t){var n=t.target;n instanceof HTMLElement&&("back"===n.getAttribute("action")&&(e.hide(),actionStack.remove(a)))})),app.append(this)}},hide:{value:function(){"function"==typeof n&&n(),d.classList.add("hide"),setTimeout(d.remove.bind(d),s.Z.pageTransitionTimeout)}},content:{get:function(){return this.get(".page-body").innerHTML},set:function(e){var t=this.get(".page-body");"string"==typeof e&&(t.innerHTML=e),e instanceof HTMLElement&&t.append(e)}}}),d}},9581:function(e,t,n){"use strict";var r=n(1315),a="favorite";t.Z={add:function(e){r.Z.add(e,a),document.dispatchEvent(new CustomEvent("favorite:add")),document.dispatchEvent(new CustomEvent("favorite:change"))},remove:function(e){r.Z.remove(e,a),document.dispatchEvent(new CustomEvent("favorite:remove")),document.dispatchEvent(new CustomEvent("favorite:change"))},clear:function(){r.Z.clear(a),document.dispatchEvent(new CustomEvent("favorite:clear")),document.dispatchEvent(new CustomEvent("favorite:change"))},has:function(e){return r.Z.has(e,a)},retrive:function(){return r.Z.retrive(a)}}},1315:function(e,t){"use strict";t.Z={add:function(e,t){var n=this.retrive(t);n.push(e),localStorage[t]=JSON.stringify(n)},remove:function(e,t){var n=this.retrive(t),r=e.id,a=n.filter((function(e){return e.id!==r}));localStorage[t]=JSON.stringify(a)},clear:function(e){localStorage[e]="[]"},has:function(e,t){var n=this.retrive(t),r=e.id;return n.find((function(e){return e.id===r}))},retrive:function(e){var t=JSON.parse(localStorage[e]||"[]");return Array.isArray(t)||(t=[]),t}}},9306:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(5383),a=n.n(r),i=n(4890),o=n(4646),c=n(9581),s=n(2713),l=n(6592),u=n(1549),d=n(419);function h(e,t,n){var r=window.innerWidth,h=Math.min(r,800)/2,g=(0,o.Z)(e,{id:"ldxpq13x",secondary:!0}),f=g.get(".page-body"),v=[],m=(0,s.Z)("#39f"),F=0,w=0,b=!1,y=!0,E=0,k=0,A=1;function C(e){f.append(e)}function D(e){var t=F,n=w,r="page_".concat(++E),o=a()("div",{id:r}),s="";e.map((function(e){return e.page="Page: ".concat(E," | Row: ").concat(A),e.count="Image: ".concat(++k),e.favorite=!!c.Z.has(e),e.relative_height=h/e.width*e.height,e.relative_width=h-7.5,1===A?(e.top=F+5,e.left=5,F+=e.relative_height+5,A=2):(e.top=w+5,e.right=5,w+=e.relative_height+5,A=1),s+=i.Z.render("<div\n  class='img'\n  action='set-wallpaper'\n  style='background-color: {{avgColor}}; \n  background-image: url({{src.thumbnail}});\n  height: {{relative_height}}px;\n  width: {{relative_width}}px;\n  top: {{top}}px;\n  {{#left}}left: {{.}}px;{{/left}}\n  {{#right}}right: {{.}}px;{{/right}}'\n  count='{{count}}'\n  page='{{page}}'\n  favorite='{{favorite}}'\n  image-id='{{id}}'\n  avg-color='{{avgColor}}'\n  author='{{meta.author}}'\n  website='{{meta.website}}'\n  email='{{meta.email}}'\n  url-thumbnail='{{src.thumbnail}}'\n  url-original='{{src.original}}'\n  image-height='{{height}}',\n  image-width='{{width}}'\n>\n  <div class='bottom-bar'>\n    <div>\n      {{#meta.author}}<small>by</small>&nbsp;{{/meta.author}}\n      <span action='open-link' data-href='{{#meta.website}}{{.}}{{/meta.website}}'>{{#meta.author}}{{.}}{{/meta.author}}</span>\n    </div>\n    <span class='icon-favorite{{#favorite}} fill-red{{/favorite}}' action='favorite' image-id='{{id}}'></span>\n  </div>\n</div>",e),e}));var l=F-t,u=w-n;return o.innerHTML=s,o.setAttribute("top",Math.min(F,w)),o.setAttribute("bottom",Math.max(F,w)),o.setAttribute("height",Math.max(l,u)),o}function B(e){var t=e.target;if(t instanceof HTMLElement)switch(t.getAttribute("action")){case"set-wallpaper":(0,l.Z)(p(t));break;case"open-link":d.Z.openlink(t.getAttribute("data-href"));break;case"favorite":!function(e){var t=p(e);e.classList.toggle("fill-red"),e.classList.add("pop"),setTimeout((function(){e.classList.remove("pop")}),100),c.Z.has(t)?c.Z.remove(t):c.Z.add(t)}(t)}}m.show().showValue(!1).animate().message("".concat(u.Z.loading,"...")),t().then((function(e){var t=D(e);m.hide(),t.innerHTML?(f.style.height="".concat(t.getAttribute("height"),"px"),C(t),v.push(t)):f.setAttribute("empty-message","No wallpaper found...")})),g.addEventListener("scroll",(function(){if(b)return;var e=.98*this.scrollHeight,n=this.scrollTop;e<=n+this.clientHeight&&y&&(b=!0,m.show(),t().then((function(e){if(m.hide(),b=!1,e.length){var t=D(e);f.style.height="".concat(t.bottom,"px"),C(t),v.push(t)}else y=!1})))})),g.addEventListener("click",B),g.render(),g.onhide=function(){v.length=0,g.removeEventListener("click",B),m.destroy(),"function"==typeof n&&n()}}function p(e){e=a().get("[image-id='".concat(e.getAttribute("image-id"),"']"));var t=function(t){return e.getAttribute(t)};return{id:t("image-id"),avgColor:t("avg-color"),height:t("image-height"),width:t("image-width"),meta:{author:t("author"),website:t("website"),email:t("email")},src:{thumbnail:t("url-thumbnail"),original:t("url-original")}}}},6592:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.e(893).then(n.bind(n,6038)).then((function(e){e.default.apply(void 0,t)}))}n.d(t,{Z:function(){return r}})},1938:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(6520),a=n(2),i=n(6652),o=n.n(i),c=n(5383),s=n.n(c),l=n(4890),u=n(6123),d=n.n(u);var h=n(4646);function p(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.e(177).then(n.bind(n,9306)).then((function(e){e.default.apply(void 0,t)}))}var g=n(9581),f=n(1549),v=n(6592);var m={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#FAA460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function F(e,t){var n=window.screen,a=n.height,i=n.width,c={width:i,height:a},s={width:650/a*i,height:650},l=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}(Object.keys(m));if("solid-colors"===t){var u=0;p("Solid colors",(0,r.Z)(o().mark((function e(){var t,n,d,h,p,g,f,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=25*u++,n=t+25,d=l.slice(t,n),h=[],p=d.length,g=function(e){var t=d[e],n=m[t];h.push(new Promise((function(e){(0,r.Z)(o().mark((function r(){var l,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,w(c,n);case 2:return l=r.sent,r.next=5,w(s,n);case 5:u=r.sent,e({id:t,height:a,width:i,avgColor:n,src:{original:l,thumbnail:u}});case 7:case"end":return r.stop()}}),r)})))()})))},f=0;f<p;++f)g(f);return e.next=9,Promise.all(h);case 9:return v=e.sent,e.abrupt("return",v);case 11:case"end":return e.stop()}}),e)}))))}}function w(e,t){var n=e.height,r=e.width,a=document.createElement("canvas"),i=a.getContext("2d");return a.height=n,a.width=r,i.fillStyle=t,i.fillRect(0,0,r,n),new Promise((function(e,t){a.toBlob((function(n){var r=new FileReader;r.readAsDataURL(n),r.onloadend=function(t){e(t.target.result)},r.onerror=t}),"image/jpeg",1)}))}var b=n(419),y="my likes",E="solid colors",k="my gallary",A="explore";function C(){var e,t,i=(0,h.Z)("Home",{id:"logu5ufd",secondary:!1}),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="https://wallpaper.foxdebug.com";function n(e){return{url:"".concat(t,"/").concat(e)}}return{all:function(t){return(0,r.Z)(o().mark((function r(){var a,i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=n("images/all?page=".concat(t,"&count=").concat(e)),r.next=3,d()(a);case 3:return i=r.sent,r.abrupt("return",i);case 5:case"end":return r.stop()}}),r)})))()},collections:function(){return(0,r.Z)(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n("collections"),e.next=3,d()(t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))()},collection:function(t){var a=arguments;return(0,r.Z)(o().mark((function r(){var i,c,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=a.length>1&&void 0!==a[1]?a[1]:1,c=n("collection/".concat(t,"?search=on&page=").concat(i,"&count=").concat(e)),r.next=4,d()(c);case 4:return s=r.sent,r.abrupt("return",s);case 6:case"end":return r.stop()}}),r)})))()},get PER_PAGE(){return e}}}(25),u=i.get(".page-body"),p=i.get("header"),m=window.innerWidth,F=Math.min(m,600)/2-15,w=2*F,b=[],C=cordova.plugins.permissions,B=C.READ_EXTERNAL_STORAGE,x=[k];g.Z.retrive().length>0&&x.push(y),window.Worker&&x.push(E),x.push(A),u.style.width="".concat(Math.min(m,600),"px"),p.innerHTML="<input type='search' placeholder='Wallpaper FXDBG' />\n<button class='icon-search' action='enable-search'></button>\n<button class='icon-settings' action='settings'></button>";var Z=p.get("[type=search]");function L(){setTimeout((function(){app.classList.add("ready"),setTimeout((function(){app.classList.remove("ready","not-ready")}),1e3)}),500)}function S(e,t,n,r){var a={title:t,type:e,description:r,height:w,width:F,get hidden(){return!this.src}};return"function"==typeof n?Object.defineProperty(a,"src",{get:n}):a.src=n,a}function P(){i.content=l.Z.render("<div class=\"collections\">\n  {{#collections}}\n  <div\n  class='collection'\n  {{#hidden}}hidden{{/hidden}}\n  {{#query}}query='.'{{/query}}\n  title='{{title}}'\n  action='{{type}}'\n  image-src='{{src}}'\n  collection-name='{{title}}'\n    style=\"{{#src}}background-image: url({{src}});{{/src}}\n    height: {{height}}px;\n    width: {{width}}px;\"\n  >\n    <div class='bottom'>\n      <span class='title'>{{title}}</span>\n      <p class='description'>{{description}}</p>\n    </div>\n  </div>\n{{/collections}}\n</div>\n\n<h2>Explore wallpapers</h2>\n<div class=\"tags scrollable\">\n  {{#tags}}\n  <span class=\"tag\" action='open-tag'>{{.}}</span>\n  {{/tags}}\n</div>",{collections:b,tags:x}),"function"==typeof e&&e()}function M(){return T.apply(this,arguments)}function T(){return(T=(0,r.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,new Promise((function(e,t){window.wallpaper.getWallpaper("HOME",e,t)}));case 3:return(n=e.sent)&&t.push({name:"Home screen",src:n}),e.next=7,new Promise((function(e,t){window.wallpaper.getWallpaper("LOCK",e,t)}));case 7:return(n=e.sent)&&t.push({name:"Lock screen",src:n}),e.next=11,new Promise((function(e,t){window.wallpaper.getAPILevel(e,t)}));case 11:e.sent<24&&t.splice(1),1===t.length&&(t[0].name="Home & Lock screen"),t.forEach((function(e){b.unshift(S("wallpaper",e.name,e.src,"Active wallpaper"))}));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}document.addEventListener("wallpaperchange",(function(){var e=1,t=/^(Home|Lock)(\s&\sLock)? screen/,n=b[0],r=b[1];n&&t.test(n.title)&&b.splice(--e,1);r&&t.test(r.title)&&b.splice(e,1);M().then(P)})),document.addEventListener("favorite:change",(function(){var e=g.Z.retrive();e.length&&!x.includes(y)?x.unshift(y):!e.length&&x.includes(y)&&x.splice(x.indexOf(y),1);P()})),Z.addEventListener("search",(function(e){e.preventDefault();var t=this.value;if(!t)return;this.blur(),D(t,c)})),Z.addEventListener("focus",(function(){var e=this;t&&(this.value=t);this.placeholder=f.Z.search,actionStack.push({id:"unfocus-search",action:function(){e.blur()}}),this.onblur=function(){var e=this;t=this.value,this.value="",window.system.getAppInfo((function(t){e.placeholder=t.label}),(function(){e.placeholder="Wallpaper"})),actionStack.remove("unfocus-search")}})),i.addEventListener("click",(function(t){var r=t.target;if(!(r instanceof HTMLElement))return;var a=r.getAttribute("action"),i=function(e){return r.getAttribute(e)};switch(a){case"open-tag":D(r.textContent,c);break;case"wallpaper":!function(e,t,n){(0,v.Z)({title:e,get id(){return this.title},src:{original:t,thumbnail:n}})}(i("title"),i("image-src"),"");break;case"enable-search":Z.focus();break;case"search":D(i("title"),c);break;case"settings":!function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.e(571).then(n.bind(n,99)).then((function(e){e.default.apply(void 0,t)}))}();break;case"grant-access":C.requestPermission(B,(function(t){t.hasPermission&&(window.hasStoragePermission=!0,e=null,M().then(P))}))}})),i.render(),P(),c.collections().then((function(e){Array.isArray(e)&&x.push.apply(x,(0,a.Z)(e)),P()})).catch((function(e){console.log(e)})),C.checkPermission(B,(function(t){if(t.hasPermission)window.hasStoragePermission=!0,M().then(P).finally(L);else{var n=s()("div",{textContent:f.Z.errorMessage,style:{width:"100%",padding:"20px",boxSizing:"border-box",backgroundColor:"#f68",textAlign:"center",color:"white",margin:"-10px 0 10px 0"},attr:{action:"grant-access"}});e=function(){return u.firstElementChild?u.insertBefore(n,u.firstElementChild):u.append(n)},P(),L()}}))}function D(e,t){var n,a=t.PER_PAGE;e!==y?e!==A?e!==k?e!==E?p(e.capitalize(),function(){var n=0;return(0,r.Z)(o().mark((function r(){var a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.collection(e,++n);case 2:return a=r.sent,r.abrupt("return",a);case 4:case"end":return r.stop()}}),r)})))}()):F(0,"solid-colors"):window.sdcard.getImage((function(e){(0,v.Z)({title:b.Z.uuid(),get id(){return this.title},src:{original:e}})}),(function(e){console.error(e)}),"image/*"):p(A.capitalize(),function(){var e=0;return(0,r.Z)(o().mark((function n(){var r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.all(++e);case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}}),n)})))}()):p(y.capitalize(),(n=0,(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n++*a,e.abrupt("return",g.Z.retrive().slice(t,t+a));case 2:case"end":return e.stop()}}),e)})))))}},1549:function(e,t){"use strict";t.Z={errorMessage:"Cannot display current wallpaper without access to your device's storage. Click here to grant access.",search:"Search",info:"info",INFO:"INFO",error:"error",ERROR:"ERROR",permissionRequired:"This feature requires permission to read sotrage. Please grant permission from settings.",imageSaved:"Image saved to gallary.",saving:"Saving",loading:"Loading",settingWallpaper:"Setting wallpaper",wallpaperChanged:"Wallpaper changed successfuly!",setAs:"Set wallpaper as"}}}]);