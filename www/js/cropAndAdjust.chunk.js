(self.webpackChunkwallpaper=self.webpackChunkwallpaper||[]).push([[893],{6038:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return se}});var r=n(6520),i=n(6652),o=n.n(i);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var h=function(){function e(t){c(this,e),this.id=-1,this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,self.Touch&&t instanceof Touch?this.id=t.identifier:f(t)&&(this.id=t.pointerId)}return u(e,[{key:"getCoalesced",value:function(){return"getCoalescedEvents"in this.nativePointer?this.nativePointer.getCoalescedEvents().map((function(t){return new e(t)})):[this]}}]),e}(),f=function(e){return self.PointerEvent&&e instanceof PointerEvent},p=function(){},d=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.start,o=void 0===i?function(){return!0}:i,s=r.move,l=void 0===s?p:s,u=r.end,d=void 0===u?p:u,v=r.rawUpdates,m=void 0!==v&&v;c(this,e),this._element=t,this.startPointers=[],this.currentPointers=[],this._pointerStart=function(e){0===e.button&&(n._triggerPointerStart(new h(e),e)&&(f(e)?((e.target&&"setPointerCapture"in e.target?e.target:n._element).setPointerCapture(e.pointerId),n._element.addEventListener(n._rawUpdates?"pointerrawupdate":"pointermove",n._move),n._element.addEventListener("pointerup",n._pointerEnd),n._element.addEventListener("pointercancel",n._pointerEnd)):(window.addEventListener("mousemove",n._move),window.addEventListener("mouseup",n._pointerEnd))))},this._touchStart=function(e){for(var t=0,r=Array.from(e.changedTouches);t<r.length;t++){var i=r[t];n._triggerPointerStart(new h(i),e)}},this._move=function(e){var t,r=n.currentPointers.slice(),i="changedTouches"in e?Array.from(e.changedTouches).map((function(e){return new h(e)})):[new h(e)],o=[],s=a(i);try{var c=function(){var e=t.value,r=n.currentPointers.findIndex((function(t){return t.id===e.id}));if(-1===r)return"continue";o.push(e),n.currentPointers[r]=e};for(s.s();!(t=s.n()).done;)c()}catch(e){s.e(e)}finally{s.f()}0!==o.length&&n._moveCallback(r,o,e)},this._triggerPointerEnd=function(e,t){var r=n.currentPointers.findIndex((function(t){return t.id===e.id}));if(-1===r)return!1;n.currentPointers.splice(r,1),n.startPointers.splice(r,1);var i="touchcancel"===t.type||"pointercancel"===t.type;return n._endCallback(e,t,i),!0},this._pointerEnd=function(e){if(n._triggerPointerEnd(new h(e),e))if(f(e)){if(n.currentPointers.length)return;n._element.removeEventListener(n._rawUpdates?"pointerrawupdate":"pointermove",n._move),n._element.removeEventListener("pointerup",n._pointerEnd),n._element.removeEventListener("pointercancel",n._pointerEnd)}else window.removeEventListener("mousemove",n._move),window.removeEventListener("mouseup",n._pointerEnd)},this._touchEnd=function(e){for(var t=0,r=Array.from(e.changedTouches);t<r.length;t++){var i=r[t];n._triggerPointerEnd(new h(i),e)}},this._startCallback=o,this._moveCallback=l,this._endCallback=d,this._rawUpdates=m&&"onpointerrawupdate"in window,self.PointerEvent?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}return u(e,[{key:"stop",value:function(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}},{key:"_triggerPointerStart",value:function(e,t){return!!this._startCallback(e,t)&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}}]),e}();function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){var t="function"==typeof Map?new Map:void 0;return(w=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return E(e,arguments,x(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_(r,e)})(e)}function E(e,t,n){return(E=b()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_(i,n.prototype),i}).apply(null,arguments)}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}("pinch-zoom {\n  display: block;\n  overflow: hidden;\n  touch-action: none;\n  --scale: 1;\n  --x: 0;\n  --y: 0;\n}\n\npinch-zoom > * {\n  transform: translate(var(--x), var(--y)) scale(var(--scale));\n  transform-origin: 0 0;\n  will-change: transform;\n}\n");var C,k="min-scale";function P(e,t){return t?Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2)):0}function L(e,t){return t?{clientX:(e.clientX+t.clientX)/2,clientY:(e.clientY+t.clientY)/2}:e}function R(e,t){return"number"==typeof e?e:e.trimRight().endsWith("%")?t*parseFloat(e)/100:parseFloat(e)}function T(){return C||(C=document.createElementNS("http://www.w3.org/2000/svg","svg"))}function S(){return T().createSVGMatrix()}function Z(){return T().createSVGPoint()}var O=.01,U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(s,e);var t,n,r,i,o,a=(t=s,n=b(),function(){var e,r=x(t);if(n){var i=x(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return g(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this))._transform=S(),new MutationObserver((function(){return e._stageElChange()})).observe(y(e),{childList:!0});var t=new d(y(e),{start:function(n,r){return!(2===t.currentPointers.length||!e._positioningEl)&&(r.preventDefault(),!0)},move:function(n){e._onPointerMove(n,t.currentPointers)}});return e.addEventListener("wheel",(function(t){return e._onWheel(t)})),e}return r=s,o=[{key:"observedAttributes",get:function(){return[k]}}],(i=[{key:"attributeChangedCallback",value:function(e,t,n){e===k&&this.scale<this.minScale&&this.setTransform({scale:this.minScale})}},{key:"minScale",get:function(){var e=this.getAttribute(k);if(!e)return O;var t=parseFloat(e);return Number.isFinite(t)?Math.max(O,t):O},set:function(e){this.setAttribute(k,String(e))}},{key:"connectedCallback",value:function(){this._stageElChange()}},{key:"x",get:function(){return this._transform.e}},{key:"y",get:function(){return this._transform.f}},{key:"scale",get:function(){return this._transform.a}},{key:"scaleTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.originX,r=void 0===n?0:n,i=t.originY,o=void 0===i?0:i,a=t.relativeTo,s=void 0===a?"content":a,c=t.allowChangeEvent,l=void 0!==c&&c,u="content"===s?this._positioningEl:this;if(u&&this._positioningEl){var h=u.getBoundingClientRect();if(r=R(r,h.width),o=R(o,h.height),"content"===s)r+=this.x,o+=this.y;else{var f=this._positioningEl.getBoundingClientRect();r-=f.left,o-=f.top}this._applyChange({allowChangeEvent:l,originX:r,originY:o,scaleDiff:e/this.scale})}else this.setTransform({scale:e,allowChangeEvent:l})}},{key:"setTransform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scale,n=void 0===t?this.scale:t,r=e.allowChangeEvent,i=void 0!==r&&r,o=e.x,a=void 0===o?this.x:o,s=e.y,c=void 0===s?this.y:s;if(this._positioningEl){var l=this.getBoundingClientRect(),u=this._positioningEl.getBoundingClientRect();if(l.width&&l.height){var h=Z();h.x=u.left-l.left,h.y=u.top-l.top;var f=Z();f.x=u.width+h.x,f.y=u.height+h.y;var p=S().translate(a,c).scale(n).multiply(this._transform.inverse());h=h.matrixTransform(p),f=f.matrixTransform(p),h.x>l.width?a+=l.width-h.x:f.x<0&&(a+=-f.x),h.y>l.height?c+=l.height-h.y:f.y<0&&(c+=-f.y),this._updateTransform(n,a,c,i)}else this._updateTransform(n,a,c,i)}else this._updateTransform(n,a,c,i)}},{key:"_updateTransform",value:function(e,t,n,r){if(!(e<this.minScale)&&(e!==this.scale||t!==this.x||n!==this.y)&&(this._transform.e=t,this._transform.f=n,this._transform.d=this._transform.a=e,this.style.setProperty("--x",this.x+"px"),this.style.setProperty("--y",this.y+"px"),this.style.setProperty("--scale",this.scale+""),r)){var i=new Event("change",{bubbles:!0});this.dispatchEvent(i)}}},{key:"_stageElChange",value:function(){this._positioningEl=void 0,0!==this.children.length&&(this._positioningEl=this.children[0],this.children.length>1&&console.warn("<pinch-zoom> must not have more than one child."),this.setTransform({allowChangeEvent:!0}))}},{key:"_onWheel",value:function(e){if(this._positioningEl){e.preventDefault();var t=this._positioningEl.getBoundingClientRect(),n=e.deltaY,r=e.ctrlKey;1===e.deltaMode&&(n*=15);var i=1-n/(r?100:300);this._applyChange({scaleDiff:i,originX:e.clientX-t.left,originY:e.clientY-t.top,allowChangeEvent:!0})}}},{key:"_onPointerMove",value:function(e,t){if(this._positioningEl){var n=this._positioningEl.getBoundingClientRect(),r=L(e[0],e[1]),i=L(t[0],t[1]),o=r.clientX-n.left,a=r.clientY-n.top,s=P(e[0],e[1]),c=P(t[0],t[1]),l=s?c/s:1;this._applyChange({originX:o,originY:a,scaleDiff:l,panX:i.clientX-r.clientX,panY:i.clientY-r.clientY,allowChangeEvent:!0})}}},{key:"_applyChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.panX,n=void 0===t?0:t,r=e.panY,i=void 0===r?0:r,o=e.originX,a=void 0===o?0:o,s=e.originY,c=void 0===s?0:s,l=e.scaleDiff,u=void 0===l?1:l,h=e.allowChangeEvent,f=void 0!==h&&h,p=S().translate(n,i).translate(a,c).translate(this.x,this.y).scale(u).translate(-a,-c).scale(this.scale);this.setTransform({allowChangeEvent:f,scale:p.a,x:p.e,y:p.f})}}])&&m(r.prototype,i),o&&m(r,o),s}(w(HTMLElement));customElements.define("pinch-zoom",U);var j=n(4890),A="<div\n  class='options'\n  style='display: flex; flex-direction: column; align-items: center; justify-content: center;'\n>\n  <style>\n    .options .option{ display: flex; height: 40px; width: 100%; align-items:\n    center; }\n  </style>\n  <div class='option' which='HOME'>Home screen</div>\n  <div class='option' which='LOCK'>Lock screen</div>\n  <div class='option' which='BOTH'>Both</div>\n</div>",I="<div\n  class='device'\n  style='height: {{height}}; width: {{width}}; background-color: {{bgColor}}'\n>\n  <pinch-zoom>\n    <img src='{{src}}' class='wallpaper' style='height: {{height}};' />\n  </pinch-zoom>\n  <div class='app-icons'>\n    <span class='app-icon'></span>\n    <span class='app-icon'></span>\n    <span class='app-icon'></span>\n    <span class='app-icon'></span>\n  </div>\n</div>\n\n<button action='set-wallpaper'>Set wallpaper</button>\n<div action='save-image'>\n  <span class='icon icon-save'></span><span>Save</span>\n</div>",W=n(4646),M=n(963);function F(e,t){var n=(0,M.Z)(e,j.Z.render('<span class="message">{{{message}}}</span>\n<div class="button-container">\n  <button action="ok">OK</button>\n</div>',{message:t}));n.$mask.onclick=n.hide,n.$body.onclick=function(e){var t=e.target;if(!(t instanceof HTMLElement))return;var r=t.getAttribute("action");if(!r)return;"ok"===r&&n.hide()},n.render()}var Y=n(2713),X=n(1315),z="downloaded",B=function(e){return X.Z.add(e,z)},H=function(e){return X.Z.has(e,z)},D=n(6123),N=n.n(D),$=n(5625),q=n(2),V=n(1018),K={dirname:function(e){e.endsWith("/")&&(e=e.slice(0,-1));var t=e.split("/").slice(0,-1);/^(\.|\.\.|)$/.test(t[0])||t.unshift(".");var n=t.join("/");return n||"/"},basename:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t=t||"",""===e||"/"===e)return e;var n=e.split("/"),r=n.slice(-1)[0];if(!r)return n.slice(-2)[0];var i=decodeURI(r.split("?")[0]||"");return this.extname(i)===t&&(i=i.replace(new RegExp("".concat(t,"$")),"")),i},extname:function(e){var t=e.split("/").slice(-1)[0];return/.+\..*$/.test(t)&&/(?:\.([^.]*))?$/.exec(t)[0]||""},format:function(e){var t=e.dir,n=e.ext,r=e.name,i=e.root,o=e.base;return!o&&n.startsWith(".")||(n="",o&&(r="")),(t=t||i).endsWith("/")||(t+="/"),t+(o||r)+n},isAbsolute:function(e){return e.startsWith("/")},join:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.join("/");return this.normalize(r)},normalize:function(e){e=(e=e.replace(/\.\/+/g,"./")).replace(/\/+/g,"/");var t=[];return e.split("/").forEach((function(e){".."!==e?"."!==e&&t.push(e):t.length&&t.pop()})),t.join("/")},parse:function(e){var t=e.startsWith("/")?"/":"",n=this.dirname(e),r=this.extname(e),i=this.basename(e,r);return{root:t,dir:n,base:this.basename(e),ext:r,name:i}},resolve:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)throw new Error("resolve(...path) : Arguments missing!");var i="";return n.forEach((function(t){i=t.startsWith("/")?t:e.normalize(e.join(i,t))})),i.startsWith("/")?i:"/".concat(i)},isParent:function(e,t){return new RegExp("^".concat(e)).test(t)},convertToRelative:function(e,t){e=this.normalize(e).split("/"),t=this.normalize(t).split("/");var n=e.length,r=t.length,i=!1,o=[];return e.forEach((function(e,n){(e!==t[n]||i)&&(o.push(t[n]),i?i&&o.unshift(".."):i=!0)})),r>n&&o.push.apply(o,(0,q.Z)(t.slice(n))),o.join("/")}},G=function(e){var t,n,r="",i=/^content:\/\/com\.(((?![:<>"/\\|?*]).)*)\.documents\/document/;try{n=cordova.file.externalRootDirectory}catch(e){n="file:///storage/emulated/0/"}if(/^content:\/\/com\.((?![:<>"/\\|?*]).)*\.documents\//.test(e)){if(/^content:\/\/com\.android\.externalstorage\.documents\/document\/primary/.test(e))t=n+decodeURIComponent(e).split(":").slice(-1)[0];else if(/^content:\/\/com\.((?![:<>"/\\|?*]).)*\.documents\/tree\//.test(e))if(/::/.test(e)){var o=e.split("::"),a=(0,V.Z)(o,2);t=a[0],r=a[1]}else t=e,r=decodeURIComponent(e.split("/").slice(-1)[0]);else if(i.test(e)){var s=i.exec(e),c=(0,V.Z)(s,2),l=c[0],u=c[1];r=(r=decodeURIComponent(e)).replace(l,""),(r=K.normalize(r)).startsWith("/")&&(r=r.slice(1)),t="content://com.".concat(u,".documents/tree/").concat(r.split(":")[0],"%3A")}return{rootUri:t,docId:r,isFileUri:/^file:\/\/\//.test(t)}}throw new Error("Invalid uri format.")},J=function(e,t){var n;return"string"==typeof e?n=e:(n=e.rootUri,t=e.docId),t?[n,t].join("::"):n},Q={basename:function(e){if(e=this.parse(e).url,"content:"!==this.getProtocol(e))return e.endsWith("/")&&(e=e.slice(0,-1)),this.pathname(e).split("/").pop();try{var t,n=G(e),r=n.rootUri,i=n.docId;return n.isFileUri?this.basename(r):(i.endsWith("/")&&(t=i.slice(0,-1)),t=i.split(":").pop(),this.pathname(t).split("/").pop())}catch(e){return null}},extname:function(e){var t=this.basename(e);return t?K.extname(t):null},join:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw new Error("Required at least two parameters");var r,i=this.parse(t[0]),o=i.url,a=i.query,s=(this.PROTOCOL_PATTERN.exec(o)||[])[0]||"";if("content://"!==s)return s?(r=o.replace(new RegExp("^".concat(s)),""),t[0]=r,s+K.join.apply(K,t)+a):K.join.apply(K,[o].concat((0,q.Z)(t.slice(1))))+a;try{t[1].startsWith("/")&&(t[1]=t[1].slice(1));var c=G(o);if("content://"===s){var l=c.docId.split(":"),u=(0,V.Z)(l,2),h=u[0],f=u[1],p=K.join.apply(K,[f].concat((0,q.Z)(t.slice(1))));return"".concat(c.rootUri,"::").concat(h,":").concat(p).concat(a)}return this.join.apply(this,[c.rootUri].concat((0,q.Z)(t.slice(1))))}catch(e){return null}},safe:function(e){var t=this.parse(e),n=t.url,r=t.query;e=n;var i=(this.PROTOCOL_PATTERN.exec(e)||[])[0]||"";return i&&(e=e.replace(new RegExp("^".concat(i)),"")),i+e.split("/").map((function(e,t){return 0===t?e:encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16))}))})).join("/")+r},pathname:function(e){if("string"!=typeof e||!this.PROTOCOL_PATTERN.test(e))return e;var t=e.split("?");e=(0,V.Z)(t,1)[0];var n=(this.PROTOCOL_PATTERN.exec(e)||[])[0]||"";if("content://"!==n)return n&&(e=e.replace(new RegExp("^".concat(n)),"")),"/".concat("file:///"!==n?e.split("/").slice(1).join("/"):e);try{var r=G(e),i=r.rootUri,o=r.docId;return r.isFileUri?this.pathname(i):"/".concat(o.split(":")[1]||o)}catch(e){return null}},dirname:function(e){if("string"!=typeof e)throw new Error("URL must be string");var t=this.parse(e);if(e=t.url,"content:"!==this.getProtocol(e))return e.endsWith("/")&&(e=e.slice(0,-1)),[].concat((0,q.Z)(e.split("/").slice(0,-1)),[""]).join("/")+t.query;try{var n,r=G(e),i=r.rootUri,o=r.docId;return r.isFileUri?this.dirname(i):(o.endsWith("/")&&(n=o.slice(0,-1)),n=[].concat((0,q.Z)(o.split("/").slice(0,-1)),[""]).join("/"),J(i,n))}catch(e){return null}},parse:function(e){var t=e.split(/(?=\?)/),n=(0,V.Z)(t,2),r=n[0],i=n[1];return{url:r,query:void 0===i?"":i}},formate:function(e){var t=e.protocol,n=e.hostname,r=e.username,i=e.password,o=e.path,a=e.port,s=e.query,c=function(e){return encodeURIComponent(e)};if(!t||!n)throw new Error("Cannot formate url. Missing 'protocol' and 'hostname'.");var l,u="".concat(t,"//");(r&&i?u+="".concat(c(r),":").concat(c(i),"@"):r&&(u+="".concat(r,"@")),u+=n,a&&(u+=":".concat(a)),o)&&(o.startsWith("/")||(l="/".concat(o)),u+=l);return s&&"object"===(0,$.Z)(s)&&(u+="?",Object.keys(s).forEach((function(e){u+="".concat(c(e),"=").concat(c(s[e]),"&")})),u=u.slice(0,-1)),u},getProtocol:function(e){return(/^([a-z]+:)\/\/\/?/i.exec(e)||[])[1]||""},hidePassword:function(e){var t=new URL(e);return"file:"===t.protocol?e:"".concat(t.origin).concat(t.pathname)},decode:function(e){if(/%[0-9a-f]{2}/i.test(e)){var t=decodeURIComponent(e);return e===t?e:this.decode(t)}return e},PROTOCOL_PATTERN:/^[a-z]+:\/\/\/?/i},ee=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=e.split("/").pop(),o=Q.dirname(e);return t instanceof ArrayBuffer&&(t=new Blob([t])),new Promise((function(a,s){n?window.resolveLocalFileSystemURL(o,(function(o){o.getFile(i,{create:n,exclusive:!!n&&r},(function(n){n.createWriter((function(n){n.onwriteend=function(){return a(e)},n.onerror=function(e){return s(e.target.error)},n.write(t)}))}),s)}),s):window.resolveLocalFileSystemURL(e,(function(n){n.isFile||s(new Error("Expected file but got directory.")),n.createWriter((function(n){n.onwriteend=function(){return a(e)},n.onerror=function(e){return s(e.target.error)},n.write(t)}))}),s)}))},te=function(e){return new Promise((function(t,n){return e?N()({url:e,responseType:"arraybuffer"}).then((function(e){return e?t({data:e}):Promise.reject()})).catch((function(){window.resolveLocalFileSystemURL(e,(function(e){e.file((function(e){var r=new FileReader;r.onloadend=function(){t({file:e,data:this.result})},r.onerror=n,r.readAsArrayBuffer(e)}),n)}),n)})):n(new Error("Invalid valud of fileURL: ".concat(e)))}))},ne=function(e,t){return new Promise((function(n,r){window.resolveLocalFileSystemURL(e,(function(i){i.getDirectory(t,{create:!0},(function(){return n(Q.join(e,t))}),r)}),r)}))},re=function(e){return new Promise((function(t,n){window.resolveLocalFileSystemURL(e,(function(){t(!0)}),(function(e){1===e.code&&t(!1),n(e)}))}))},ie=n(419);function oe(e){var t,n,i,a,s="".concat(e.id,".jpeg");return{get imageData(){return a},get name(){return s},get onprogress(){return t},set onprogress(e){t=e},getLocalUri:function(){return(0,r.Z)(o().mark((function r(){var c,l,u,h;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=H(e)){r.next=17;break}return l=cordova.file.externalDataDirectory,u=l+s,r.next=6,N()({url:e.src.original,responseType:"arraybuffer",xhr:function(e){n=e,e.onprogress=function(e){var n=e.loaded/e.total*100;ie.Z.call(t,Math.min(n,99.9))},e.onabort=function(){i=!0,ie.Z.call(t,100)}}});case 6:if(h=r.sent,!i&&h){r.next=10;break}return ie.Z.call(t,100),r.abrupt("return",null);case 10:return a=h,r.next=13,ee(u,h,!0,!1);case 13:return ie.Z.call(t,100),e.localUri=u,/^https?:\/\//.test(e.src.original)&&B(e),r.abrupt("return",u);case 17:return r.abrupt("return",c.localUri);case 18:case"end":return r.stop()}}),r)})))()},abort:function(){n&&"abort"in n&&n.abort()}}}var ae=n(1549);function se(e){return ce.apply(this,arguments)}function ce(){return(ce=(0,r.Z)(o().mark((function e(t){var n,i,a,s,c,l,u,h,f,p,d,v,m,g,y,w,E,b,_,x,C,k,P,L,R,T,S;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S=function(){var e=v.scale,t=function(e){var t=v.y,n=-(m.clientHeight*e+4-v.clientHeight);return t>0?0:t<n?n:t},n=function(e){var t=v.x,n=-(m.clientWidth*e-v.clientWidth);return t>0?0:t<n?n:t};e>h&&e<=f?v.setTransform({y:t(e),x:n(e),allowChangeEvent:!1}):e>f?v.setTransform({scale:f,x:p,y:d,allowChangeEvent:!1}):v.setTransform({scale:h,x:n(h),y:t(h),allowChangeEvent:!1}),p=v.x,d=v.y},T=function(e){e&&(u.hide(),F(ae.Z.INFO,ae.Z.wallpaperChanged),document.dispatchEvent(new CustomEvent("wallpaperchange")))},R=function(){return(R=(0,r.Z)(o().mark((function e(t){var n,r,i,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.showValue(!1).show().animate().message("".concat(ae.Z.settingWallpaper,"...")),e.prev=1,e.next=4,new Promise((function(e,t){window.system.convertUriToContentSchema(m.src,(function(t){console.log(t),e(t)}),(function(e){console.error(e),t(e)}))}));case 4:n=e.sent,r=v.scale,i=m.clientWidth*r,a=m.clientHeight*r,s={x:Math.abs(v.x/i),y:Math.abs(v.y/a),h:g.clientHeight/a,w:g.clientWidth/i,s:r},window.wallpaper.setWallpaper(t,n,s,T,(function(e){u.hide().message(""),F(ae.Z.ERROR,e)})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),u.hide(),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)},L=function(e){return R.apply(this,arguments)},P=function(){return new Promise((function(e){var t=(0,M.Z)(ae.Z.setAs,A,"center",!0);t.render(),t.$mask.onclick=t.hide,t.$body.onclick=function(n){t.hide();var r=n.target;if(r instanceof HTMLElement){var i=r.getAttribute("which");i&&e(i)}}}))},k=function(){return(k=(0,r.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){window.wallpaper.getAPILevel(e,t)}));case 2:if(t=e.sent,e.prev=3,!(t>=24)){e.next=12;break}return e.next=7,P();case 7:return n=e.sent,e.next=10,L(n);case 10:e.next=14;break;case 12:return e.next=14,L("HOME");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[3,16]])})))).apply(this,arguments)},C=function(){return k.apply(this,arguments)},x=function(){return(x=(0,r.Z)(o().mark((function e(){var n,a,s,c,l,h,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!hasStoragePermission){e.next=31;break}return u.showValue(!1).show().animate().message("".concat(ae.Z.saving,"...")),n=i.name,a=Q.join(cordova.file.externalRootDirectory,"pictures"),s=K.parse(n),c=Q.join(a,n),l=1,e.next=9,re(a);case 9:if(e.sent){e.next=12;break}return e.next=12,ne(a);case 12:return e.next=14,function(){var e=(0,r.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(c);case 2:if(!e.sent){e.next=6;break}n="".concat(s.name,"_").concat(l++).concat(s.ext),c=Q.join(a,n),t();case 6:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()();case 14:if(!t.localUri){e.next=30;break}return e.prev=15,e.next=18,te(t.localUri);case 18:return h=e.sent,f=h.data,e.next=22,ee(c,f,!0,!1);case 22:u.hide(),F(ae.Z.INFO,ae.Z.imageSaved),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(15),u.hide(),F(ae.Z.ERROR,ie.Z.getErrorMessage(e.t0));case 30:return e.abrupt("return");case 31:F(ae.Z.INFO,ae.Z.permissionRequired);case 32:case"end":return e.stop()}}),e,null,[[15,26]])})))).apply(this,arguments)},_=function(){return x.apply(this,arguments)},b=function(e){var t=e.target;if(t instanceof HTMLElement){var n=t.getAttribute("action");if(!n)return;switch(n){case"set-wallpaper":C();break;case"save-image":_()}}},n=(0,W.Z)("CropAndAdjust",{id:"l4wl0xol",secondary:!0}),i=oe(t),a=window.screen.height,s=window.screen.width,c=.7*window.innerHeight,l=c*(s/a),u=(0,Y.Z)("#39f"),h=1,f=4,p=0,d=0,n.content=j.Z.render(I,{height:"".concat(c,"px"),width:"".concat(l,"px"),bgColor:t.avgColor}),n.render(),v=n.get("pinch-zoom"),m=v.get("img"),g=n.get(".device"),y=n.get("button"),w=n.get('[action="save-image"]'),/(home|lock)( & lock)? screen/i.test(t.title)||w.remove(),n.addEventListener("click",b),v.addEventListener("change",S),n.onhide=function(){y.removeEventListener("click",b),v.removeEventListener("change",S),i.abort(),u.destroy()},e.next=34,ie.Z.wait(300);case 34:if(t.src.thumbnail&&(m.src=t.src.thumbnail),!(E=H(t))){e.next=43;break}return e.next=39,ie.Z.wait(300);case 39:t.localUri=E.localUri,m.src=E.localUri,e.next=48;break;case 43:return u.showValue(!0).show(),i.onprogress=function(e){100!==e?99.9!==e?u.progress(e):u.animate():u.hide()},e.next=47,i.getLocalUri();case 47:m.src=e.sent;case 48:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);